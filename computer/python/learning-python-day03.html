<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>学习Python Doc第三天:函数</title>
<meta name="generator" content="Org mode" />
<meta name="author" content="张朝龙" />
<link rel="stylesheet" type="text/css" href="../../css/worg.css" />
<a id="home" href="../../index.html"><img src="../../img/assets/home.png" ></a>
<a id="pdf"  href="./learning-python-day03.pdf"><img src="../../img/assets/pdf.png"></a>
<script type="text/javascript">
/*
@licstart  The following is the entire license notice for the
JavaScript code in this tag.

Copyright (C) 2012-2013 Free Software Foundation, Inc.

The JavaScript code in this tag is free software: you can
redistribute it and/or modify it under the terms of the GNU
General Public License (GNU GPL) as published by the Free Software
Foundation, either version 3 of the License, or (at your option)
any later version.  The code is distributed WITHOUT ANY WARRANTY;
without even the implied warranty of MERCHANTABILITY or FITNESS
FOR A PARTICULAR PURPOSE.  See the GNU GPL for more details.

As additional permission under GNU GPL version 3 section 7, you
may distribute non-source (e.g., minimized or compacted) forms of
that code without the copy of the GNU GPL normally required by
section 4, provided you include this license notice and a URL
through which recipients can access the Corresponding Source.


@licend  The above is the entire license notice
for the JavaScript code in this tag.
*/
<!--/*--><![CDATA[/*><!--*/
 function CodeHighlightOn(elem, id)
 {
   var target = document.getElementById(id);
   if(null != target) {
     elem.cacheClassElem = elem.className;
     elem.cacheClassTarget = target.className;
     target.className = "code-highlighted";
     elem.className   = "code-highlighted";
   }
 }
 function CodeHighlightOff(elem, id)
 {
   var target = document.getElementById(id);
   if(elem.cacheClassElem)
     elem.className = elem.cacheClassElem;
   if(elem.cacheClassTarget)
     target.className = elem.cacheClassTarget;
 }
/*]]>*///-->
</script>
</head>
<body>
<div id="content">
<h1 class="title">学习Python Doc第三天:函数</h1>
<div id="table-of-contents">
<h2>目录</h2>
<div id="text-table-of-contents">
<ul>
<li><a href="#org22b7cdf">1. 为函数指定默认参数值</a></li>
<li><a href="#orgabca2cf">2. 关键词参数</a></li>
<li><a href="#org1a5b1ef">3. 任意参数列表</a></li>
</ul>
</div>
</div>
<p>
在定义函数的时候，我们可以为输入参数指定默认值，也可以使输入参数的个数可变，等等。今天，我们深入讨论一下函数。
</p>

<div id="outline-container-org22b7cdf" class="outline-2">
<h2 id="org22b7cdf"><span class="section-number-2">1</span> 为函数指定默认参数值</h2>
<div class="outline-text-2" id="text-1">
<p>

</p>

<p>
在定义函数的时候可以为函数的一个或者多个参数指定默认值。通过这种方法，我们定义了一个可变参量的函数，在调用的时候，如果给定了默认值的参数没有被赋值则用默认值代替，看代码：
</p>
<div class="org-src-container">
<pre class="src src-python"><span class="linenr"> 1: </span><span style="color: #859900; font-weight: bold;">def</span> <span style="color: #268bd2;">ask_ok</span><span style="color: #2aa198;">(</span>prompt,retries=<span style="color: #6c71c4;">4</span>,reminder=<span style="color: #2aa198;">'please try again'</span><span style="color: #2aa198;">)</span>:
<span class="linenr"> 2: </span>    <span style="color: #859900; font-weight: bold;">while</span> <span style="color: #268bd2; font-weight: bold;">True</span>:
<span class="linenr"> 3: </span>        <span style="color: #268bd2;">ok</span> = <span style="color: #839496; font-weight: bold;">input</span><span style="color: #2aa198;">(</span>prompt<span style="color: #2aa198;">)</span>
<span id="coderef-in" class="coderef-off"><span class="linenr"> 4: </span>        <span style="color: #859900; font-weight: bold;">if</span> ok <span style="color: #859900; font-weight: bold;">in</span> <span style="color: #2aa198;">(</span><span style="color: #2aa198;">'y'</span>,<span style="color: #2aa198;">'ye'</span>,<span style="color: #2aa198;">'yes'</span><span style="color: #2aa198;">)</span>:</span>
<span class="linenr"> 5: </span>            <span style="color: #859900; font-weight: bold;">return</span> <span style="color: #268bd2; font-weight: bold;">True</span>
<span class="linenr"> 6: </span>        <span style="color: #859900; font-weight: bold;">if</span> ok <span style="color: #859900; font-weight: bold;">in</span> <span style="color: #2aa198;">(</span><span style="color: #2aa198;">'n'</span>,<span style="color: #2aa198;">'no'</span>,<span style="color: #2aa198;">'nop'</span>,<span style="color: #2aa198;">'nope'</span><span style="color: #2aa198;">)</span>:
<span class="linenr"> 7: </span>            <span style="color: #859900; font-weight: bold;">return</span> <span style="color: #268bd2; font-weight: bold;">False</span>
<span class="linenr"> 8: </span>        <span style="color: #268bd2;">retries</span> = retries -<span style="color: #6c71c4;">1</span>
<span class="linenr"> 9: </span>        <span style="color: #859900; font-weight: bold;">if</span> retries &lt; <span style="color: #6c71c4;">0</span> :
<span class="linenr">10: </span>            <span style="color: #859900; font-weight: bold;">raise</span> <span style="color: #b58900;">ValueError</span><span style="color: #2aa198;">(</span><span style="color: #2aa198;">'invalid user response'</span><span style="color: #2aa198;">)</span>
<span class="linenr">11: </span>        <span style="color: #859900; font-weight: bold;">print</span><span style="color: #2aa198;">(</span>reminder<span style="color: #2aa198;">)</span>
</pre>
</div>

<p>
这个函数可以用三种方式调用：
</p>
<ol class="org-ol">
<li>给定一个参数， <code>ask_ok('Do you really want to quit?')</code></li>
<li>给一个可选参数赋值， <code>ask_ok('OK to overwrite the file',2)</code></li>
<li>给所有参数赋值， <code>ask_ok('OK to overwrite the file',2,'come on, only yes or no!')</code></li>
</ol>

<p>
这个函数在第 <a href="#coderef-in" class="coderef" onmouseover="CodeHighlightOn(this, 'coderef-in');" onmouseout="CodeHighlightOff(this, 'coderef-in');">4</a> 行引入了一个关键词 <code>in</code> ,这个关键词用来测试一个序列是不是包含了特定值。
</p>

<p>
参数的默认值在定义函数的时候就被执行了，看代码：
</p>
<div class="org-src-container">
<pre class="src src-python"><span style="color: #268bd2;">i</span> = <span style="color: #6c71c4;">5</span>
<span style="color: #859900; font-weight: bold;">def</span> <span style="color: #268bd2;">f</span><span style="color: #2aa198;">(</span>arg = i<span style="color: #2aa198;">)</span>:
    <span style="color: #859900; font-weight: bold;">print</span><span style="color: #2aa198;">(</span>arg<span style="color: #2aa198;">)</span>

<span style="color: #268bd2;">i</span> = <span style="color: #6c71c4;">6</span>
f<span style="color: #2aa198;">()</span>
</pre>
</div>
<p>
输出为：
</p>
<pre class="example">
5
</pre>



<p>
可以看到 <code>arg=i</code> 中的 <code>i</code> 在定义的时候被赋值为 <code>5</code> 这个函数定义的时候就把 <code>arg</code> 赋值为 <code>5</code> 。
</p>

<p>
注意：默认值只被赋值一次。但是当默认参量是一个list，dictionary或者 大多数class的instance时 执行过程会稍有不同，看代码：
</p>
<div class="org-src-container">
<pre class="src src-python"><span class="linenr">1: </span><span style="color: #859900; font-weight: bold;">def</span> <span style="color: #268bd2;">f</span><span style="color: #2aa198;">(</span>a,L = <span style="color: #b58900;">[]</span><span style="color: #2aa198;">)</span>:
<span class="linenr">2: </span>    L.append<span style="color: #2aa198;">(</span>a<span style="color: #2aa198;">)</span>
<span class="linenr">3: </span>    <span style="color: #859900; font-weight: bold;">return</span> L
<span class="linenr">4: </span>
<span class="linenr">5: </span><span style="color: #859900; font-weight: bold;">print</span><span style="color: #2aa198;">(</span>f<span style="color: #b58900;">(</span><span style="color: #6c71c4;">1</span><span style="color: #b58900;">)</span><span style="color: #2aa198;">)</span>
<span class="linenr">6: </span><span style="color: #859900; font-weight: bold;">print</span><span style="color: #2aa198;">(</span>f<span style="color: #b58900;">(</span><span style="color: #6c71c4;">2</span><span style="color: #b58900;">)</span><span style="color: #2aa198;">)</span>
<span class="linenr">7: </span><span style="color: #859900; font-weight: bold;">print</span><span style="color: #2aa198;">(</span>f<span style="color: #b58900;">(</span><span style="color: #6c71c4;">3</span><span style="color: #b58900;">)</span><span style="color: #2aa198;">)</span>
</pre>
</div>

<p>
输出为：
</p>
<pre class="example">
[1]
[1, 2]
[1, 2, 3]
</pre>
<p>
如果你不想在多次调用过程中共享默认值参量，你可以这样写:
</p>
<div class="org-src-container">
<pre class="src src-python"><span class="linenr">1: </span><span style="color: #859900; font-weight: bold;">def</span> <span style="color: #268bd2;">f</span><span style="color: #2aa198;">(</span>a,L = <span style="color: #268bd2; font-weight: bold;">None</span> <span style="color: #2aa198;">)</span>:
<span class="linenr">2: </span>    <span style="color: #859900; font-weight: bold;">if</span> L <span style="color: #859900; font-weight: bold;">is</span> <span style="color: #268bd2; font-weight: bold;">None</span>:
<span class="linenr">3: </span>        <span style="color: #268bd2;">L</span> = <span style="color: #2aa198;">[]</span>;
<span class="linenr">4: </span>    L.append<span style="color: #2aa198;">(</span>a<span style="color: #2aa198;">)</span>
<span class="linenr">5: </span>    <span style="color: #859900; font-weight: bold;">return</span> L
<span class="linenr">6: </span>
<span class="linenr">7: </span><span style="color: #859900; font-weight: bold;">print</span><span style="color: #2aa198;">(</span>f<span style="color: #b58900;">(</span><span style="color: #6c71c4;">1</span><span style="color: #b58900;">)</span><span style="color: #2aa198;">)</span>
<span class="linenr">8: </span><span style="color: #859900; font-weight: bold;">print</span><span style="color: #2aa198;">(</span>f<span style="color: #b58900;">(</span><span style="color: #6c71c4;">2</span><span style="color: #b58900;">)</span><span style="color: #2aa198;">)</span>
<span class="linenr">9: </span><span style="color: #859900; font-weight: bold;">print</span><span style="color: #2aa198;">(</span>f<span style="color: #b58900;">(</span><span style="color: #6c71c4;">3</span><span style="color: #b58900;">)</span><span style="color: #2aa198;">)</span>
</pre>
</div>
<p>
输出为：
</p>
<pre class="example">
[1]
[2]
[3]
</pre>
</div>
</div>
<div id="outline-container-orgabca2cf" class="outline-2">
<h2 id="orgabca2cf"><span class="section-number-2">2</span> 关键词参数</h2>
<div class="outline-text-2" id="text-2">
<p>

</p>

<p>
关键词参数我还不是很理解，在python doc里有一个例子：
</p>
<div class="org-src-container">
<pre class="src src-python"><span class="linenr">1: </span><span style="color: #859900; font-weight: bold;">def</span> <span style="color: #268bd2;">parrot</span><span style="color: #2aa198;">(</span>voltage,state = <span style="color: #2aa198;">'a stiff'</span>, action = <span style="color: #2aa198;">'voom'</span>, <span style="color: #839496; font-weight: bold;">type</span> = <span style="color: #2aa198;">'Norwegian Blue'</span><span style="color: #2aa198;">)</span>:
<span class="linenr">2: </span>    <span style="color: #859900; font-weight: bold;">print</span><span style="color: #2aa198;">(</span><span style="color: #2aa198;">"-- This parrot wouldn't "</span>, action, end=<span style="color: #2aa198;">' '</span><span style="color: #2aa198;">)</span>
<span class="linenr">3: </span>    <span style="color: #859900; font-weight: bold;">print</span><span style="color: #2aa198;">(</span><span style="color: #2aa198;">"if you put"</span>, voltage, <span style="color: #2aa198;">"volts through it."</span><span style="color: #2aa198;">)</span>
<span class="linenr">4: </span>    <span style="color: #859900; font-weight: bold;">print</span><span style="color: #2aa198;">(</span><span style="color: #2aa198;">"-- Lovely plumage, the"</span>, <span style="color: #839496; font-weight: bold;">type</span><span style="color: #2aa198;">)</span>
<span class="linenr">5: </span>    <span style="color: #859900; font-weight: bold;">print</span><span style="color: #2aa198;">(</span><span style="color: #2aa198;">"-- It's "</span>,state,<span style="color: #2aa198;">"!"</span><span style="color: #2aa198;">)</span>
</pre>
</div>

<p>
这个函数接受一个必选参数 <code>voltage</code> 和三个可选参数 <code>state</code> <code>action</code> <code>type</code> ，这个参数通过以下语句来调用：
</p>
<pre class="example">
parrot(1000)                                          # 1 positional argument
parrot(voltage=1000)                                  # 1 keyword argument
parrot(voltage=1000000, action='VOOOOOM')             # 2 keyword arguments
parrot(action='VOOOOOM', voltage=1000000)             # 2 keyword arguments
parrot('a million', 'bereft of life', 'jump')         # 3 positional arguments
parrot('a thousand', state='pushing up the daisies')  # 1 positional, 1 keyword
</pre>

<p>
但是下面的几种调用方式都是非法的：
</p>
<pre class="example">
parrot()                     # required argument missing
parrot(voltage=5.0, 'dead')  # non-keyword argument after a keyword argument
parrot(110, voltage=220)     # duplicate value for the same argument
parrot(actor='John Cleese')  # unknown keyword argument
</pre>

<p>
当一个函数的最后一个参数是 <code>**name</code> 这种类型时，该函数接受字典类型数据作为输入，看代码:
</p>
<div class="org-src-container">
<pre class="src src-python"><span class="linenr">1: </span><span style="color: #859900; font-weight: bold;">def</span> <span style="color: #268bd2;">cheeseshop</span><span style="color: #2aa198;">(</span>kind, *argument, **keywords<span style="color: #2aa198;">)</span>:
<span class="linenr">2: </span>    <span style="color: #859900; font-weight: bold;">print</span><span style="color: #2aa198;">(</span><span style="color: #2aa198;">"-- Do you have any"</span>,kind,<span style="color: #2aa198;">"?"</span><span style="color: #2aa198;">)</span>
<span class="linenr">3: </span>    <span style="color: #859900; font-weight: bold;">print</span><span style="color: #2aa198;">(</span><span style="color: #2aa198;">"-- I'am sorry, we are all out of"</span>,kind<span style="color: #2aa198;">)</span>
<span class="linenr">4: </span>    <span style="color: #859900; font-weight: bold;">for</span> arg <span style="color: #859900; font-weight: bold;">in</span> argument:
<span class="linenr">5: </span>        <span style="color: #859900; font-weight: bold;">print</span><span style="color: #2aa198;">(</span>arg<span style="color: #2aa198;">)</span>
<span class="linenr">6: </span>    <span style="color: #859900; font-weight: bold;">print</span><span style="color: #2aa198;">(</span><span style="color: #2aa198;">'-'</span>*<span style="color: #6c71c4;">40</span><span style="color: #2aa198;">)</span>
<span class="linenr">7: </span>    <span style="color: #268bd2;">keys</span> = <span style="color: #839496; font-weight: bold;">sorted</span><span style="color: #2aa198;">(</span>keywords.keys<span style="color: #b58900;">()</span><span style="color: #2aa198;">)</span>
<span class="linenr">8: </span>    <span style="color: #859900; font-weight: bold;">for</span> kw <span style="color: #859900; font-weight: bold;">in</span> keys:
<span class="linenr">9: </span>        <span style="color: #859900; font-weight: bold;">print</span><span style="color: #2aa198;">(</span>kw,<span style="color: #2aa198;">":"</span>,keywords<span style="color: #b58900;">[</span>kw<span style="color: #b58900;">]</span><span style="color: #2aa198;">)</span>
</pre>
</div>

<p>
调用时，可以这样子：
</p>
<pre class="example">
cheeseshop("Limburger", "It's very runny, sir.",
           "It's really very, VERY runny, sir.",
           shopkeeper="Michael Palin",
           client="John Cleese",
           sketch="Cheese Shop Sketch")
</pre>
<p>
输出为：
</p>
<pre class="example">
-- Do you have any Limburger ?
-- I'm sorry, we're all out of Limburger
It's very runny, sir.
It's really very, VERY runny, sir.
----------------------------------------
client : John Cleese
shopkeeper : Michael Palin
sketch : Cheese Shop Sketch
</pre>
</div>
</div>
<div id="outline-container-org1a5b1ef" class="outline-2">
<h2 id="org1a5b1ef"><span class="section-number-2">3</span> 任意参数列表</h2>
<div class="outline-text-2" id="text-3">
<p>

</p>

<p>
一个函数可以被设计的支持任意参数。这些参数被放置到一个tuple里。看代码：
</p>
<div class="org-src-container">
<pre class="src src-python"><span class="linenr">1: </span><span style="color: #859900; font-weight: bold;">def</span> <span style="color: #268bd2;">write_multiple_items</span><span style="color: #2aa198;">(</span><span style="color: #839496; font-weight: bold;">file</span>, separator, *args<span style="color: #2aa198;">)</span>:
<span class="linenr">2: </span>    <span style="color: #839496; font-weight: bold;">file</span>.write<span style="color: #2aa198;">(</span>separator.join<span style="color: #b58900;">(</span>args<span style="color: #b58900;">)</span><span style="color: #2aa198;">)</span>
</pre>
</div>

<p>
任何在 <code>*args</code> 之后出现的参数都被 <code>*args</code> 接受。另外在定义函数时， <code>*args</code> 之后的参数必须以 <code>keyword-value</code> 的形式出现。
</p>

<p>
比如：
</p>
<div class="org-src-container">
<pre class="src src-python"><span class="linenr">1: </span><span style="color: #859900; font-weight: bold;">def</span> <span style="color: #268bd2;">concat</span><span style="color: #2aa198;">(</span>*args,sep = <span style="color: #2aa198;">"/"</span><span style="color: #2aa198;">)</span>:
<span class="linenr">2: </span>    <span style="color: #859900; font-weight: bold;">return</span> sep.join<span style="color: #2aa198;">(</span>args<span style="color: #2aa198;">)</span>
</pre>
</div>
<p>
调用和输出为:
</p>
<pre class="example">
In [333]: concat("earth","mars","venus")
Out[337]: 
'earth/mars/venus'

In [338]: concat("earth","mars","venus",sep='.')
Out[356]: 
'earth.mars.venus'
</pre>
</div>
</div>
</div>
<div id="postamble" class="status">
<div id="disqus_thread"></div>
<script type="text/javascript">
    /* * * CONFIGURATION VARIABLES * * */
    var disqus_shortname = 'zclspace';

    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a></noscript>
</div>
</body>
</html>
