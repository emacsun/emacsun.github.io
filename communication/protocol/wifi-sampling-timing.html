<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>采样定时偏差及其纠正</title>
<meta name="generator" content="Org mode" />
<meta name="author" content="Eastern(ZCL)" />
<meta name="description" content="本文描述LTE-FDD和TDD的频带资源"
 />
<link rel="stylesheet" type="text/css" href="../../css/worg.css"  />
<a id="home" href="../../index.html"><img src="../../img/assets/home.png" ></a>
<a id="pdf"  href="./wifi-sampling-timing.pdf"><img src="../../img/assets/pdf.png"></a>
<script type="text/javascript">
/*
@licstart  The following is the entire license notice for the
JavaScript code in this tag.

Copyright (C) 2012-2017 Free Software Foundation, Inc.

The JavaScript code in this tag is free software: you can
redistribute it and/or modify it under the terms of the GNU
General Public License (GNU GPL) as published by the Free Software
Foundation, either version 3 of the License, or (at your option)
any later version.  The code is distributed WITHOUT ANY WARRANTY;
without even the implied warranty of MERCHANTABILITY or FITNESS
FOR A PARTICULAR PURPOSE.  See the GNU GPL for more details.

As additional permission under GNU GPL version 3 section 7, you
may distribute non-source (e.g., minimized or compacted) forms of
that code without the copy of the GNU GPL normally required by
section 4, provided you include this license notice and a URL
through which recipients can access the Corresponding Source.


@licend  The above is the entire license notice
for the JavaScript code in this tag.
*/
<!--/*--><![CDATA[/*><!--*/
 function CodeHighlightOn(elem, id)
 {
   var target = document.getElementById(id);
   if(null != target) {
     elem.cacheClassElem = elem.className;
     elem.cacheClassTarget = target.className;
     target.className = "code-highlighted";
     elem.className   = "code-highlighted";
   }
 }
 function CodeHighlightOff(elem, id)
 {
   var target = document.getElementById(id);
   if(elem.cacheClassElem)
     elem.className = elem.cacheClassElem;
   if(elem.cacheClassTarget)
     target.className = elem.cacheClassTarget;
 }
/*]]>*///-->
</script>
<script type="text/x-mathjax-config">
    MathJax.Hub.Config({
        displayAlign: "left",
        displayIndent: "7em",

        "HTML-CSS": { scale: 100,
                        linebreaks: { automatic: "false" },
                        webFont: "Neo-Euler"
                       },
        SVG: {scale: 100,
              linebreaks: { automatic: "false" },
              font: "Neo-Euler"},
        NativeMML: {scale: 100},
        TeX: { equationNumbers: {autoNumber: "AMS"},
               MultLineWidth: "85%",
               TagSide: "right",
               TagIndent: ".8em"
             }
});
</script>
<script type="text/javascript"
        src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js?config=TeX-AMS_HTML"></script>
</head>
<body>
<div id="content">
<h1 class="title">采样定时偏差及其纠正</h1>
<div id="table-of-contents">
<h2>目录</h2>
<div id="text-table-of-contents">
<ul>
<li><a href="#org884e4b5">1. 采样定时偏差来源分析</a></li>
<li><a href="#org36261d3">2. 采样定时偏差的纠正过程</a></li>
</ul>
</div>
</div>

<div id="outline-container-org884e4b5" class="outline-2">
<h2 id="org884e4b5"><span class="section-number-2">1</span> 采样定时偏差来源分析</h2>
<div class="outline-text-2" id="text-1">
<p>
采样定时偏差来源于接收机和发送机之间ADC和DAC采样频率的不同。由于晶振的偏差，接收端和发送端的DAC和ADC不可能有相同的频率，这样，采样定时偏差是不可避免的，接下来我们分析采样定时偏差对系统性能产生的影响以及如何利用已有信息克服这些影响。
</p>

<p>
采样定时偏差主要有两方面的影响主要体现在两方面：（1）符号定位点的漂移。这会造成子载波的旋转，不过可以通过频偏估计进行消除。（前文已经分析过，频偏估计结果可以有效的克服定位不准造成的子载波旋转。（2）子载波之间干扰（Intercarrier Interference）。采样定时偏差会造成采样时刻的偏转，导致子载波之间正交性的破坏。
</p>

<p>
为了克服采样定时偏差造成的影响，我们先对采样定时偏差对系统造成的影响在数学上进行描述。我们定义归一化的采样定时偏差为：
</p>
\begin{equation}
  \label{eq:2011041801}
  t_{\Delta}=\frac{T^{'}-T}{T}
\end{equation}
<p>
其中 \(T^{'}\) 和 \(T\) 是分别是接收端和发送端的采样周期。在存在采样定时偏差的系统中，接收到的第 \(l\) 个符号的第 \(k\) 个子载波上的符号是：
</p>
\begin{equation}
  \label{eq:2011041802}
  R_{l,k} = e^{j2\pi kt_{\Delta}l\frac{T_s}{T_u}}X_{l,k}sinc(\pi kt_{\Delta}) H_{l,k} + W_{l,k} + N_{t_{\Delta(}}(l,k)
\end{equation}
<p>
其中 \(T_s,T_u\) 分别是一个OFDM符号的持续时间和OFDM符号中有效数据的持续时间， \(W_{l,k}\) 是加性白噪声， \(N_{t_{\Delta(}}(l,k)\) 是因为采样频率偏差引起的干扰，其功率是 \(P_{t_{\Delta}}\approx \frac{{\pi}^2}{3}(kt_{\Delta})^2\) ，可以看出因为采样频率偏差引起的干扰的功率随着采样时间的偏差和子载波数的增加而增加，所以可以确定偏离零频越远的子载波受采样频率偏差的影响越大。通常，WLAN系统的子载波个数较少，而且 \(t_{\Delta}\) 也较小，所以式(\ref{eq:2011041802})等号右边第三项造成的影响可以忽略不计。我们重点关注由采样频率偏差造成的相位旋转，即式(\ref{eq:2011041802})等号右边第一项。从表达式上看出由于采样频率偏差造成的相位和子载波个数和OFDM符号数有关。OFDM符号越是靠后，子载波序号越大，受采样频率偏差造成的影响就越大。我们知道在WLAN系统中  \(t_{\Delta}\)  较小，但是随着  \(l\)  和  \(k\)  的增大相位累积会越来越大，这就导致星座图的旋转，使得正确解调变的非常困难，这也就是为什么要纠正采样频率偏差的原因。事实上，采用频率偏差和残余频偏对系统造成的影响是一样的：都造成了星座图的旋转，从而导致不能正常解调。由此我认为纠正残余频偏的算法也可以在此使用，我会做实验证明这一点。<br />
</p>

<p>
在已发表的文献中，比较实用的纠正采样频率偏差的方法是使用导频辅助的方法。在IEEE802.11a中每一个OFDM符号都有四个导频，它们的子载波序号是  \(-21,-7,7,21\)  。
</p>

<p>
导频信号按照其位置分布分为两个集合：在零频左边的为 \(C_1\) ，在零频右边的为 \(C_2\) 假设导频信号经过信道在接收端的形式如式(\ref{eq:2011041803})所示。
</p>
\begin{equation}
  \label{eq:2011041803}
  R_{l,k} = H_kP_{l,k}e^{j2\pi k t_{\Delta}l\frac{T_s}{T_u}}
\end{equation}
<p>
把相邻两个OFDM符号的相同位置上的子载波做相关运算。
</p>
\begin{eqnarray}
  \label{eq:2011041804}
  Z_{l,k} &=& R_{l,k}R_{l-1,k}^* \\
        &=& H_kP_{l,k}e^{j2\pi k t_{\Delta}l\frac{T_s}{T_u}} (H_kP_{l-1,k}e^{j2\pi k t_{\Delta}(l-1)\frac{T_s}{T_u}})^* \\
        &=& |H_k|^2|P_{l,k}|^2 e^{j2\pi k t_{\Delta}l\frac{T_s}{T_u}}e^{-j2\pi k t_{\Delta}(l-1)\frac{T_s}{T_u}}\\
        &=& |H_k|^2|P_{l,k}|^2 e^{j2\pi k t_{\Delta}\frac{T_s}{T_u}}
\end{eqnarray}
<p>
接下来计算两个集合中导频的相位累积：
</p>
\begin{eqnarray}
  \label{eq:2011041805}
  \Phi_{1,l} &=& \angle [\sum_{k\in C_1} Z_{l,k}] \\
  \Phi_{2,l} &=& \angle [\sum_{k\in C_2} Z_{l,k}]
\end{eqnarray}
<p>
采样定时偏差估计值为：
</p>
\begin{equation}
  \label{eq:2011041806}
  \hat{t}_{{\Delta}} = \frac{1}{2\pi} \frac{T_u}{T_s} \frac{1}{\min_{k\in C_2}(k) + \max_{k\in C_2}(k)}(\Phi_{2,l}- \Phi_{1,l})
\end{equation}
<p>
假设导频子载波均匀分布，我们定义归一化因子为 \(\min_{k\in C_2}(k) + \max_{k\in C_2}(k)\) 。<br />
</p>
</div>
</div>

<div id="outline-container-org36261d3" class="outline-2">
<h2 id="org36261d3"><span class="section-number-2">2</span> 采样定时偏差的纠正过程</h2>
<div class="outline-text-2" id="text-2">

<div class="figure">
<p><img src="../../img/communication_protocol/20171018samplingTimingA.png" alt="20171018samplingTimingA.png" width="600" align="center" />
</p>
</div>

<p>
在上图中，采用同步纠正的方法，即在接收端通过实时纠正ADC的采样频率来消除采样定时偏差。理论上讲，这种方法可以完美的消除采样定时偏差。然而这种方法需要在接收机的模拟部分多加添加一些电路，使接收机的设计复杂，不符合接收机数字化的趋势。
</p>



<div class="figure">
<p><img src="../../img/communication_protocol/20171018samplingTimingB.png" alt="20171018samplingTimingB.png" width="600" align="center" />
</p>
</div>

<p>
在上图中，接收机的ADC采样频率是固定的，不需要额外的模拟电路去控制，减轻了接收机模拟电路的设计负担。我们称这种方法为非同步纠正方法。非同步纠正方法的接收机里多了两个模块：rob/stuff模块和ROTOR模块。rob/stuff模块的作用是：当接收机的ADC采样频率快于或者慢于发送端DAC的频率时，在ADC输出的数字信号里擦除或者插入采样点。添加rob/stuff模块的原因是：随着采样时刻的偏转，有可能使得采样时刻的漂移大于一个采样周期。ROTOR模块的作用是，根据DPLL估计出的采样定时偏差对接收到的数据进行相位纠正。
</p>
</div>
</div>
</div>
<div id="postamble" class="status">
<div id="disqus_thread"></div>
<script type="text/javascript">
    /* * * CONFIGURATION VARIABLES * * */
    var disqus_shortname = 'zclspace';

    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a></noscript>
</div>
</body>
</html>
