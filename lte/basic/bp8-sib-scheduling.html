<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
<meta  http-equiv="Content-Type" content="text/html;charset=utf-8" />
<meta  name="viewport" content="width=device-width, initial-scale=1" />
<title>基本流程之八：SIB规划</title>
<meta  name="generator" content="Org-mode" />
<meta  name="author" content="emacsun （所有文章遵循GPL协议）" />
<link rel="stylesheet" type="text/css" href="../../css/worg.css"  />
<a id="home" href="../../index.html"><img src="../../img/assets/home.png" ></a>
<a id="part"  href="../index.html"><img src="../../img/assets/lte2.png"></a>
<script type="text/javascript">
/*
@licstart  The following is the entire license notice for the
JavaScript code in this tag.

Copyright (C) 2012-2013 Free Software Foundation, Inc.

The JavaScript code in this tag is free software: you can
redistribute it and/or modify it under the terms of the GNU
General Public License (GNU GPL) as published by the Free Software
Foundation, either version 3 of the License, or (at your option)
any later version.  The code is distributed WITHOUT ANY WARRANTY;
without even the implied warranty of MERCHANTABILITY or FITNESS
FOR A PARTICULAR PURPOSE.  See the GNU GPL for more details.

As additional permission under GNU GPL version 3 section 7, you
may distribute non-source (e.g., minimized or compacted) forms of
that code without the copy of the GNU GPL normally required by
section 4, provided you include this license notice and a URL
through which recipients can access the Corresponding Source.


@licend  The above is the entire license notice
for the JavaScript code in this tag.
*/
<!--/*--><![CDATA[/*><!--*/
 function CodeHighlightOn(elem, id)
 {
   var target = document.getElementById(id);
   if(null != target) {
     elem.cacheClassElem = elem.className;
     elem.cacheClassTarget = target.className;
     target.className = "code-highlighted";
     elem.className   = "code-highlighted";
   }
 }
 function CodeHighlightOff(elem, id)
 {
   var target = document.getElementById(id);
   if(elem.cacheClassElem)
     elem.className = elem.cacheClassElem;
   if(elem.cacheClassTarget)
     target.className = elem.cacheClassTarget;
 }
/*]]>*///-->
</script>
</head>
<body>
<div id="content">
<h1 class="title">基本流程之八：SIB规划</h1>
<p>
在LTE系统中，任何一个小区都要发送MIB，SIB1，SIB2。因为许多SIB要发送，因此SIB要合理的规划，避免两个SIB占用相同的资源。
</p>

<p>
通常，MIB和SIB的发送满足条件：
</p>
<ol class="org-ol">
<li>MIB以固定周期发送（从SFN=0开始的每四个帧）</li>
<li>SIB1也是以固定的周期发送（从SFN=0开始的每八个帧）</li>
<li>所有其他的SIB的发送周期在SIB1中规定</li>
</ol>


<div class="figure">
<p><img src="../../img/bp8-sib-scheduling-01.png" alt="cat/spider image" align="center" width="600" />
</p>
</div>

<p>
或许，你已经发现：LTE的SIB1与WCDMA的MIB很像。在测试过程中，你需要非常小心第3步。如果这个值没有设置正确，除了SIB1之外的所有SIB都不会被UE正确译码。这意味着即使所有的SIB都发送了，但是UE会尝试在错误的时间起始点去译码这些SIB。结果，UE不会正确的识别小区，导致UE得出“no service”的结论。
</p>

<p>
根据36.331的第5.2.1.2节，MIB的规划如下：
</p>

<p class="verse">
<i>The MIB uses a fixed schedule with aperiodicity of 40ms and repetitions made within 40ms. The first transmission of the MIB is scheduled in subframe #0 of radio frames for which the SFN mod 4=0, and repetitions are scheduled in subframe #0 of all other radio frames.</i><br  />
</p>


<p>
根据36.331第6.2.2节消息的定义，MIB中描述系统帧号SFN为：
</p>
<p class="verse">
<i>Define the 8 mos significant bits of the SFN. As indicated in TS 36.211, the 2 least significant bits of the SFN are acquired implicitly in the PBCH decoding, i.e. timing of 40ms PBCH TTI indicates 2 least significant bits (within 40ms PBCH TTI, the first radio frame: 00, the second radion frame: 01, the third radio frame: 10, the last radio frame:11). One value applies for all serving cells (the associated functionality is common i.e. not performed independently for each cell);</i><br  />
</p>

<p>
根据36.331第5.2.1.2小结，SIB1的规划如下：
</p>

<p class="verse">
The SystemInformationBlockType1 uses a fixed schedule with a periodicity of 80ms and repetitions made within 80ms. The first transmission fo SystemInformationBlockType1 is scheduled in subframe #5 of radio frames for which the SFN mod 8=0, and repetitions are scheduled in subframe #5 of all other radio frames for which SFN mod 2=0<br  />
</p>

<p>
这意味着即使SIB1的周期是80ms，不同的SIB1拷贝（Redudancy version：RV）的周期是20ms。这意味着在L3，SIB1的周期是80ms，但是在PHY层SIB1的周期是20ms。RV分配的更多细节，参见36.321的第5.3.1节(这一节的最后一部分。)
</p>

<p>
其他SIBs的传输周期通过SIB1指定：
</p>

<pre class="example">
+-schedulingInfoList ::= SEQUENCE OF SIZE(1..maxSI-Message[32]) [2]
| +-SchedulingInfo ::= SEQUENCE
| | +-si-Periodicity ::= ENUMERATED [rf16]
| | +-sib-MappingInfo ::= SEQUENCE OF SIZE(0..maxSIB-1[31]) [0]
| +-SchedulingInfo ::= SEQUENCE
|   +-si-Periodicity ::= ENUMERATED [rf32]
|   +-sib-MappingInfo ::= SEQUENCE OF SIZE(0..maxSIB-1[31]) [1]
|     +-SIB-Type ::= ENUMERATED [sibType3]
+-tdd-Config ::= SEQUENCE OPTIONAL:Omit
+-si-WindowLength ::= ENUMERATED [ms20]
</pre>

<p>
其中有一件事情需要注意：SIB的映射信息并没有在第一个节点中指明，但是schedulingInfoList的第一条应该总是SIB2（参见36.321）
</p>
<p class="verse">
<i>List of the SIBs mapped to this SystemInformation message. There is no mapping information of SIB2; it is always present in the first SystemInformation message listed in the schedulingInfoList list.</i><br  />
</p>

<p>
理解子帧的周期是很容易的事情，但是理解SIB在哪一个子帧上传输就没有那么简单了。这与"si-WindowLength"有关。 <b>si-WindowLength</b> 告知一个SIB应该在哪一个窗口内传输。
</p>

<p>
SIB到底在哪一个子帧传输由一个算法制定，该算法在36.331的第5.2.3节规定。
</p>
</div>
<div id="postamble" class="status">
<div id="disqus_thread"></div>
<script type="text/javascript">
    /* * * CONFIGURATION VARIABLES * * */
    var disqus_shortname = 'emacsungithubio';
    
    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a></noscript>
</div>
</body>
</html>
